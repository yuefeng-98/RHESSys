#workflow file for Github Action
name: build_docker
on: [push]
#    push:
#        branches: [master]
jobs:
        update_build:
                runs-on: ubuntu-18.04
                steps:
                        name: Build Chain ${{ matrix.java-version }}
                        id: build-chain
                        uses: ginxo/github-action-build-chain@BXMSPROD-1025
                        with:
                            definition-file: './definition_file.yml'
                            flow-type: 'single'
                        env:
                            GITHUB_TOKEN: "${{ secrets.LOGIN_TOKEN }}"
                        
                        name: Login to DockerHub
                        uses: docker/login-action@v1
                        with:
                                username: ${{ secrets.DOCKER_USERNAME }}
                                password: ${{ secrets.DOCKER_PASSWORD }}

                        name: Build and Push
                        id: docker_build
                        uses: docker/build-push-action@v2
                        with:
                                push: true
                                tags: lgraup/rhessys
